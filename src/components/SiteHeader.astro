---
const links = [
  { href: "#projects", label: "Projects" },
  { href: "#experience", label: "Experience" },
  { href: "#skills", label: "Skills" },
  { href: "#contact", label: "Contact" },
];
---

<header class="site-header" data-site-header>
  <div class="container site-header__bar">
    <a href="/" class="row" style="gap:.6rem;">
      <span style="width:.6rem;height:.6rem;border-radius:999px;background: hsl(var(--primary)); box-shadow: var(--shadow-glow);"></span>
      <strong>Marton V</strong>
    </a>

    <!-- Desktop nav -->
    <nav class="nav nav--desktop" aria-label="Primary">
      {links.map(l => <a href={l.href}>{l.label}</a>)}
      <a class="btn btn--primary" href="#contact">Let’s talk</a>
    </nav>

    <!-- Mobile toggle -->
    <button class="navToggle" type="button" aria-label="Open menu" aria-controls="mobileDrawer" aria-expanded="false">
      <span class="navToggle__bar"></span>
      <span class="navToggle__bar"></span>
      <span class="navToggle__bar"></span>
    </button>
  </div>

  <!-- Full-width drawer that slides down under header -->
  <div class="underDrawer" id="mobileDrawer" aria-hidden="true" data-under-drawer>
    <div class="container underDrawer__inner">
      <nav class="underDrawer__nav" aria-label="Mobile">
        {links.map(l => (
          <a class="underDrawer__link" href={l.href} data-under-link>{l.label}</a>
        ))}
        <a class="btn btn--primary underDrawer__cta" href="#contact" data-under-link>Let’s talk</a>
      </nav>
    </div>
  </div>

  <script is:inline>
    (() => {
      const header = document.querySelector('[data-site-header]');
      const toggle = document.querySelector('.navToggle');
      const drawer = document.querySelector('[data-under-drawer]');
      if (!header || !toggle || !drawer) return;

      const links = drawer.querySelectorAll('[data-under-link]');

      const open = () => {
        header.classList.add('is-open');
        drawer.setAttribute('aria-hidden', 'false');
        toggle.setAttribute('aria-expanded', 'true');
      };

      const close = () => {
        header.classList.remove('is-open');
        drawer.setAttribute('aria-hidden', 'true');
        toggle.setAttribute('aria-expanded', 'false');
      };

      toggle.addEventListener('click', () => {
        header.classList.contains('is-open') ? close() : open();
      });

      links.forEach(a => a.addEventListener('click', close));

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && header.classList.contains('is-open')) close();
      });
    })();
  </script>
</header>
